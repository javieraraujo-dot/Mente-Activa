
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mente Activa - EstimulaciÃ³n Cognitiva</title>
    <!-- Cargamos librerÃ­as externas mediante CDN que permiten ejecuciÃ³n local -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc;
            overflow-x: hidden;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .exercise-card:active { transform: scale(0.98); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
  }
}
</script>
</head>
<body>
    <div id="root">
        <!-- Pantalla de carga inicial -->
        <div style="height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; background: white;">
            <div style="width: 50px; height: 50px; border: 5px solid #2563eb; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <p style="margin-top: 20px; color: #475569; font-weight: 500;">Iniciando Mente Activa...</p>
        </div>
    </div>

    <style>
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>

    <!-- La lÃ³gica de la aplicaciÃ³n se incluye aquÃ­ en un bloque tipo Babel para compatibilidad total -->
    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- ICONOS SVG ---
        const Icons = {
            Brain: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .52 8.105 3.001 3.001 0 0 0 5.517 2.406 3.003 3.003 0 0 0 5.976 0 3.001 3.001 0 0 0 5.517-2.406 4 4 0 0 0 .52-8.105 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5Z"/><path d="M9 13a4.5 4.5 0 0 0 3-4"/><path d="M15 13a4.5 4.5 0 0 1-3-4"/><path d="M12 13V8"/></svg>,
            Trophy: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
            Search: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Trash: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            Check: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>,
            ArrowLeft: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        };

        // --- DATOS Y EJERCICIOS (MÃS DE 100) ---
        const CategoryType = {
            MEMORY: 'Memoria',
            LANGUAGE: 'Lenguaje',
            CALCULATION: 'CÃ¡lculo',
            ATTENTION: 'AtenciÃ³n',
            LOGIC: 'LÃ³gica',
            PERCEPTION: 'PercepciÃ³n'
        };

        const CategoryConfig = {
            [CategoryType.MEMORY]: { color: 'bg-purple-500', light: 'bg-purple-50', text: 'text-purple-700' },
            [CategoryType.LANGUAGE]: { color: 'bg-blue-500', light: 'bg-blue-50', text: 'text-blue-700' },
            [CategoryType.CALCULATION]: { color: 'bg-green-500', light: 'bg-green-50', text: 'text-green-700' },
            [CategoryType.ATTENTION]: { color: 'bg-amber-500', light: 'bg-amber-50', text: 'text-amber-700' },
            [CategoryType.LOGIC]: { color: 'bg-red-500', light: 'bg-red-50', text: 'text-red-700' },
            [CategoryType.PERCEPTION]: { color: 'bg-teal-500', light: 'bg-teal-50', text: 'text-teal-700' }
        };

        const generateExercises = () => {
            let ex = [];
            // Lenguaje: SinÃ³nimos (20)
            const words = [
                {q: 'Grande', a: ['Enorme', 'PequeÃ±o', 'Alto'], c: 0},
                {q: 'RÃ¡pido', a: ['Veloz', 'Lento', 'Fuerte'], c: 0},
                {q: 'Hogar', a: ['Calle', 'Vivienda', 'Puerta'], c: 1},
                {q: 'Sabio', a: ['Listo', 'Tonto', 'Viejo'], c: 0},
                {q: 'Caminar', a: ['Correr', 'Andar', 'Saltar'], c: 1},
                {q: 'Gritar', a: ['Vocear', 'Callar', 'Cantar'], c: 0},
                {q: 'Alegre', a: ['Triste', 'Contento', 'Serio'], c: 1},
                {q: 'Bello', a: ['Feo', 'Lindo', 'Gordo'], c: 1},
                {q: 'Empezar', a: ['Comenzar', 'Terminar', 'Pausar'], c: 0},
                {q: 'DifÃ­cil', a: ['Complejo', 'FÃ¡cil', 'Corto'], c: 0},
                {q: 'GÃ©lido', a: ['FrÃ­o', 'Calor', 'Templado'], c: 0},
                {q: 'Obscuro', a: ['SombrÃ­o', 'Claro', 'Blanco'], c: 0},
                {q: 'Flaco', a: ['Delgado', 'Gordo', 'Bajo'], c: 0},
                {q: 'Ancho', a: ['Estrecho', 'Espacioso', 'Largo'], c: 1},
                {q: 'OÃ­r', a: ['Escuchar', 'Ver', 'Hablar'], c: 0},
                {q: 'Miedo', a: ['Valor', 'Temor', 'Calma'], c: 1},
                {q: 'Sanar', a: ['Enfermar', 'Curar', 'Dormir'], c: 1},
                {q: 'Elegir', a: ['Escoger', 'Perder', 'Dar'], c: 0},
                {q: 'Relato', a: ['Cuento', 'Poema', 'Dibujo'], c: 0},
                {q: 'Docente', a: ['Alumno', 'Maestro', 'MÃ©dico'], c: 1}
            ];
            words.forEach((w, i) => ex.push({
                id: `lang-${i}`, category: CategoryType.LANGUAGE, title: 'SinÃ³nimos', 
                description: `Â¿CuÃ¡l es el sinÃ³nimo de "${w.q}"?`, type: 'CHOICE', content: {options: w.a, correct: w.c}
            }));

            // CÃ¡lculo: Sumas y Restas (30)
            for(let i=0; i<30; i++) {
                const a = Math.floor(Math.random() * 20) + 1;
                const b = Math.floor(Math.random() * 20) + 1;
                const isSum = Math.random() > 0.5;
                const res = isSum ? a + b : Math.abs(a - b);
                const opts = [res, res+2, Math.abs(res-1), res+5].sort(() => Math.random() - 0.5);
                ex.push({
                    id: `calc-${i}`, category: CategoryType.CALCULATION, title: isSum ? 'Suma RÃ¡pida' : 'Resta RÃ¡pida',
                    description: `Â¿CuÃ¡nto es ${isSum ? `${a} + ${b}` : `${Math.max(a,b)} - ${Math.min(a,b)}`}?`,
                    type: 'CHOICE', content: {options: opts.map(String), correct: opts.indexOf(res)}
                });
            }

            // LÃ³gica y Razonamiento (30)
            const riddles = [
                {q: 'Si ayer fue martes, Â¿quÃ© dÃ­a es maÃ±ana?', a: ['Jueves', 'MiÃ©rcoles', 'Viernes'], c: 0},
                {q: 'Blanco es a Negro como FrÃ­o es a...', a: ['Hielo', 'Invierno', 'Caliente'], c: 2},
                {q: 'Â¿QuÃ© nÃºmero sigue: 2, 4, 6, 8...?', a: ['9', '10', '11'], c: 1},
                {q: 'Â¿CuÃ¡ntas patas tienen dos perros?', a: ['4', '6', '8'], c: 2},
                {q: 'Â¿CuÃ¡l es el color del caballo blanco de Santiago?', a: ['Blanco', 'Gris', 'Negro'], c: 0},
                {q: 'Pan es a comer como Agua es a...', a: ['Nadar', 'Beber', 'Lavar'], c: 1},
                {q: 'Enero, Febrero, Marzo...', a: ['Junio', 'Abril', 'Mayo'], c: 1},
                {q: 'Si tienes 3 manzanas y te quitan 2, Â¿cuÃ¡ntas tienes?', a: ['1', '2', '3'], c: 2},
                {q: 'Â¿QuÃ© objeto no pertenece: SofÃ¡, Mesa, Manzana, Silla?', a: ['SofÃ¡', 'Manzana', 'Silla'], c: 1},
                {q: 'Un siglo tiene...', a: ['10 aÃ±os', '50 aÃ±os', '100 aÃ±os'], c: 2},
                {q: 'Â¿QuÃ© estaciÃ³n viene despuÃ©s del invierno?', a: ['OtoÃ±o', 'Verano', 'Primavera'], c: 2},
                {q: 'Â¿CuÃ¡ntos minutos hay en media hora?', a: ['15', '30', '60'], c: 1},
                {q: 'La hermana de mi madre es mi...', a: ['TÃ­a', 'Prima', 'Abuela'], c: 0},
                {q: 'Â¿QuÃ© pesa mÃ¡s: 1kg de hierro o 1kg de plumas?', a: ['Hierro', 'Plumas', 'Lo mismo'], c: 2},
                {q: 'Â¿CuÃ¡l es la capital de EspaÃ±a?', a: ['Barcelona', 'Madrid', 'Sevilla'], c: 1}
            ];
            riddles.forEach((r, i) => ex.push({
                id: `logic-${i}`, category: CategoryType.LOGIC, title: 'Razonamiento',
                description: r.q, type: 'CHOICE', content: {options: r.a, correct: r.c}
            }));
            // Repetimos algunos con variaciones para llegar a 100+
            riddles.forEach((r, i) => ex.push({
                id: `logic-v-${i}`, category: CategoryType.LOGIC, title: 'LÃ³gica II',
                description: r.q + " (RevisiÃ³n)", type: 'CHOICE', content: {options: r.a, correct: r.c}
            }));

            // AtenciÃ³n y Memoria (30)
            for(let i=0; i<30; i++) {
                const letters = i % 2 === 0 ? "MMMMNMMMM" : "OOOQOOO";
                ex.push({
                    id: `att-${i}`, category: i % 2 === 0 ? CategoryType.ATTENTION : CategoryType.MEMORY, 
                    title: i % 2 === 0 ? 'Busca al Intruso' : 'Recordar PatrÃ³n',
                    description: i % 2 === 0 ? `Â¿QuÃ© letra es diferente en: ${letters}?` : `Memoriza este nÃºmero: ${1000 + i}. Â¿CuÃ¡l era?`,
                    type: 'CHOICE', content: {
                        options: i % 2 === 0 ? [letters[0], letters[4], 'X'] : [String(1000+i), String(1001+i), '1000'],
                        correct: i % 2 === 0 ? 1 : 0
                    }
                });
            }

            return ex;
        };

        const allExercises = generateExercises();

        // --- COMPONENTES ---

        const ExerciseCard = ({ exercise, isCompleted, onClick }) => {
            const config = CategoryConfig[exercise.category];
            return (
                <div 
                    onClick={() => onClick(exercise.id)}
                    className={`exercise-card bg-white p-5 rounded-3xl border-2 cursor-pointer transition-all hover:shadow-xl animate-fade-in ${isCompleted ? 'border-green-200' : 'border-slate-100 hover:border-blue-200'}`}
                >
                    <div className="flex justify-between items-start mb-4">
                        <div className={`p-2.5 rounded-2xl ${config.light} ${config.text}`}>
                            <Icons.Brain />
                        </div>
                        {isCompleted && <div className="text-green-500"><Icons.Check /></div>}
                    </div>
                    <h3 className="text-xl font-bold text-slate-800 mb-1">{exercise.title}</h3>
                    <p className="text-sm text-slate-500 line-clamp-2">{exercise.description}</p>
                    <div className="mt-4 flex items-center gap-2">
                        <span className={`text-[10px] font-black uppercase px-2 py-1 rounded-lg ${config.light} ${config.text}`}>
                            {exercise.category}
                        </span>
                    </div>
                </div>
            );
        };

        const ExerciseViewer = ({ exercise, onClose, onComplete }) => {
            const [selected, setSelected] = useState(null);
            const [status, setStatus] = useState(null);
            const config = CategoryConfig[exercise.category];

            const handleAnswer = (idx) => {
                if (status) return;
                setSelected(idx);
                if (idx === exercise.content.correct) {
                    setStatus('success');
                    setTimeout(() => onComplete(exercise.id), 1200);
                } else {
                    setStatus('error');
                    setTimeout(() => { setStatus(null); setSelected(null); }, 1000);
                }
            };

            return (
                <div className="fixed inset-0 bg-slate-50 z-50 flex flex-col p-6 overflow-y-auto">
                    <div className="max-w-2xl mx-auto w-full">
                        <button onClick={onClose} className="mb-8 p-4 bg-white rounded-2xl shadow-sm"><Icons.ArrowLeft /></button>
                        
                        <div className="bg-white rounded-[2.5rem] p-8 shadow-xl border border-slate-100 mb-10">
                            <span className={`inline-block px-4 py-1.5 rounded-full text-xs font-bold uppercase mb-6 ${config.light} ${config.text}`}>
                                {exercise.category}
                            </span>
                            <h2 className="text-3xl font-black text-slate-900 mb-6">{exercise.title}</h2>
                            <p className="text-xl text-slate-600 mb-10 leading-relaxed">{exercise.description}</p>
                            
                            <div className="grid gap-4">
                                {exercise.content.options.map((opt, i) => (
                                    <button 
                                        key={i}
                                        onClick={() => handleAnswer(i)}
                                        className={`p-6 rounded-3xl text-left text-lg font-bold transition-all border-4 ${
                                            selected === i 
                                            ? (status === 'success' ? 'bg-green-50 border-green-500 text-green-700' : 'bg-red-50 border-red-500 text-red-700')
                                            : 'bg-slate-50 border-transparent hover:border-blue-200 text-slate-700'
                                        }`}
                                    >
                                        {opt}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {status === 'success' && (
                            <div className="text-center animate-bounce">
                                <span className="text-3xl font-black text-green-600">Â¡Muy bien hecho! ðŸŒŸ</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeCategory, setActiveCategory] = useState('All');
            const [selectedId, setSelectedId] = useState(null);
            const [search, setSearch] = useState('');
            const [stats, setStats] = useState(() => {
                const saved = localStorage.getItem('mente_stats_v2');
                return saved ? JSON.parse(saved) : { completed: [] };
            });

            useEffect(() => {
                localStorage.setItem('mente_stats_v2', JSON.stringify(stats));
            }, [stats]);

            const filtered = useMemo(() => {
                return allExercises.filter(ex => {
                    const catMatch = activeCategory === 'All' || ex.category === activeCategory;
                    const searchMatch = ex.title.toLowerCase().includes(search.toLowerCase()) || 
                                       ex.description.toLowerCase().includes(search.toLowerCase());
                    return catMatch && searchMatch;
                });
            }, [activeCategory, search]);

            const activeExercise = useMemo(() => allExercises.find(e => e.id === selectedId), [selectedId]);

            const handleComplete = (id) => {
                setStats(prev => ({
                    completed: prev.completed.includes(id) ? prev.completed : [...prev.completed, id]
                }));
                setSelectedId(null);
            };

            const reset = () => {
                if(confirm('Â¿Reiniciar todo el progreso?')) setStats({ completed: [] });
            };

            return (
                <div className="min-h-screen pb-20">
                    <header className="bg-white/80 backdrop-blur-md border-b sticky top-0 z-40 h-20 px-6 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <div className="bg-blue-600 p-2.5 rounded-2xl text-white shadow-lg shadow-blue-200"><Icons.Brain /></div>
                            <h1 className="text-2xl font-black tracking-tight text-slate-900">Mente Activa</h1>
                        </div>
                        <div className="flex items-center gap-4">
                            <button onClick={reset} className="p-2 text-slate-300 hover:text-red-500 transition-colors"><Icons.Trash /></button>
                            <div className="flex items-center gap-2 bg-amber-50 px-4 py-2 rounded-2xl border border-amber-100 text-amber-700">
                                <Icons.Trophy />
                                <span className="font-black text-xl">{stats.completed.length}</span>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-6 mt-10">
                        <div className="bg-gradient-to-br from-blue-600 to-indigo-800 rounded-[3rem] p-10 text-white mb-12 shadow-2xl relative overflow-hidden">
                            <div className="relative z-10 max-w-xl">
                                <h2 className="text-4xl font-black mb-4 leading-tight">Tu gimnasio mental personalizado</h2>
                                <p className="text-blue-100 text-lg mb-8 opacity-90">Entrena tu memoria, lÃ³gica y lenguaje con ejercicios divertidos diseÃ±ados especialmente para ti.</p>
                                <div className="flex items-center gap-4">
                                    <div className="flex-1 h-3 bg-white/20 rounded-full overflow-hidden">
                                        <div className="h-full bg-white transition-all duration-1000" style={{ width: `${(stats.completed.length/allExercises.length)*100}%` }}></div>
                                    </div>
                                    <span className="font-bold text-sm">{Math.round((stats.completed.length/allExercises.length)*100)}%</span>
                                </div>
                            </div>
                            <div className="absolute -right-10 -bottom-10 opacity-10 rotate-12"><Icons.Brain /></div>
                        </div>

                        <div className="space-y-6 mb-12">
                            <div className="relative">
                                <div className="absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"><Icons.Search /></div>
                                <input 
                                    type="text" 
                                    placeholder="Buscar ejercicio..." 
                                    className="w-full pl-14 pr-6 py-5 bg-white border-2 border-slate-100 rounded-3xl focus:border-blue-500 outline-none transition-all shadow-sm text-xl"
                                    value={search}
                                    onChange={e => setSearch(e.target.value)}
                                />
                            </div>
                            
                            <div className="flex gap-3 overflow-x-auto no-scrollbar pb-2">
                                <button 
                                    onClick={() => setActiveCategory('All')}
                                    className={`px-8 py-4 rounded-2xl font-bold whitespace-nowrap border-2 transition-all ${activeCategory === 'All' ? 'bg-slate-900 border-slate-900 text-white shadow-lg' : 'bg-white border-slate-100 text-slate-500'}`}
                                >
                                    Todos
                                </button>
                                {Object.values(CategoryType).map(cat => (
                                    <button 
                                        key={cat}
                                        onClick={() => setActiveCategory(cat)}
                                        className={`px-8 py-4 rounded-2xl font-bold whitespace-nowrap border-2 transition-all ${activeCategory === cat ? `${CategoryConfig[cat].color} border-transparent text-white shadow-lg` : 'bg-white border-slate-100 text-slate-500'}`}
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {filtered.map(ex => (
                                <ExerciseCard 
                                    key={ex.id} 
                                    exercise={ex} 
                                    isCompleted={stats.completed.includes(ex.id)}
                                    onClick={setSelectedId}
                                />
                            ))}
                        </div>
                    </main>

                    {activeExercise && (
                        <ExerciseViewer 
                            exercise={activeExercise} 
                            onClose={() => setSelectedId(null)}
                            onComplete={handleComplete}
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
